warning: variable does not need to be mutable
    --> src/registry.rs:1484:17
     |
1484 |             let mut pool = self.connection_pool.lock().await;
     |                 ----^^^^
     |                 |
     |                 help: remove this `mut`
     |
     = note: `#[warn(unused_mut)]` on by default

warning: field `buffer_size` is never read
   --> src/connection_pool.rs:172:5
    |
169 | pub struct MessageBufferPool {
    |            ----------------- field in this struct
...
172 |     buffer_size: usize,
    |     ^^^^^^^^^^^
    |
    = note: `MessageBufferPool` has a derived impl for the trait `Debug`, but this is intentionally ignored during dead code analysis
    = note: `#[warn(dead_code)]` on by default

warning: method `send_data_async` is never used
   --> src/connection_pool.rs:913:14
    |
799 | impl ConnectionHandle {
    | --------------------- method in this implementation
...
913 |     async fn send_data_async(&self, data: &[u8]) -> Result<()> {
    |              ^^^^^^^^^^^^^^^

warning: function `start_persistent_connection_reader` is never used
    --> src/connection_pool.rs:1522:4
     |
1522 | fn start_persistent_connection_reader(
     |    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: function `handle_incoming_persistent_connection` is never used
    --> src/connection_pool.rs:1533:21
     |
1533 | pub(crate) async fn handle_incoming_persistent_connection(
     |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: function `handle_persistent_connection_impl` is never used
    --> src/connection_pool.rs:1645:10
     |
1645 | async fn handle_persistent_connection_impl(
     |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: function `read_message` is never used
   --> src/handle.rs:479:10
    |
479 | async fn read_message(stream: &mut TcpStream, max_size: usize) -> Result<RegistryMessage> {
    |          ^^^^^^^^^^^^

warning: function `send_gossip_message_persistent` is never used
   --> src/handle.rs:672:10
    |
672 | async fn send_gossip_message_persistent(
    |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: `kameo_remote` (lib) generated 8 warnings (run `cargo fix --lib -p kameo_remote` to apply 1 suggestion)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.03s
     Running `target/debug/examples/test_manual_a`
Starting Node A on 127.0.0.1:8001...
[2m2025-07-18T23:37:29.943721Z[0m [32m INFO[0m [1mnew[0m[1m{[0m[3mbind_addr[0m[2m=[0m127.0.0.1:8001[1m}[0m[2m:[0m [2mkameo_remote::registry[0m[2m:[0m creating new gossip registry [3mbind_addr[0m[2m=[0m127.0.0.1:8001
[2m2025-07-18T23:37:29.943934Z[0m [32m INFO[0m [1mnew[0m[1m{[0m[3mbind_addr[0m[2m=[0m127.0.0.1:8001[1m}[0m[2m:[0m [2mkameo_remote::registry[0m[2m:[0m added bootstrap peer as initially offline [3mpeer[0m[2m=[0m127.0.0.1:8002
[2m2025-07-18T23:37:29.943947Z[0m [32m INFO[0m [1mnew[0m[1m{[0m[3mbind_addr[0m[2m=[0m127.0.0.1:8001[1m}[0m[2m:[0m [2mkameo_remote::registry[0m[2m:[0m added bootstrap peer as initially offline [3mpeer[0m[2m=[0m127.0.0.1:8003
[2m2025-07-18T23:37:29.943957Z[0m [32m INFO[0m [1mnew[0m[1m{[0m[3mbind_addr[0m[2m=[0m127.0.0.1:8001[1m}[0m[2m:[0m [2mkameo_remote::registry[0m[2m:[0m added bootstrap peers (all initially offline) [3mpeer_count[0m[2m=[0m2
[2m2025-07-18T23:37:29.944371Z[0m [32m INFO[0m [1mstart_gossip_server_with_listener[0m[2m:[0m [2mkameo_remote::handle[0m[2m:[0m gossip server started [3mbind_addr[0m[2m=[0m127.0.0.1:8001
[2m2025-07-18T23:37:29.944454Z[0m [32m INFO[0m [1mstart_gossip_timer[0m[2m:[0m [2mkameo_remote::handle[0m[2m:[0m gossip timer started with non-blocking I/O [3mgossip_interval_ms[0m[2m=[0m10000 [3mcleanup_interval_secs[0m[2m=[0m60
[2m2025-07-18T23:37:29.944529Z[0m [32m INFO[0m [1mstart_gossip_server_with_listener[0m[2m:[0m [2mkameo_remote::handle[0m[2m:[0m ðŸ“¥ ACCEPTED incoming connection [3mpeer_addr[0m[2m=[0m127.0.0.1:54081
[2m2025-07-18T23:37:29.944599Z[0m [32m INFO[0m [1mhandle_connection[0m[1m{[0m[3mpeer_addr[0m[2m=[0m127.0.0.1:54081 [3mpeer[0m[2m=[0m127.0.0.1:54081[1m}[0m[2m:[0m [2mkameo_remote::handle[0m[2m:[0m ðŸ”Œ HANDLE_CONNECTION: Starting to handle new incoming connection
[2m2025-07-18T23:37:29.944671Z[0m [32m INFO[0m [2mkameo_remote::handle[0m[2m:[0m HANDLE.RS: Starting incoming direct TCP connection handler [3mpeer[0m[2m=[0m127.0.0.1:54081
[2m2025-07-18T23:37:29.944685Z[0m [33m WARN[0m [2mkameo_remote::handle[0m[2m:[0m failed to read initial message from incoming connection [3merror[0m[2m=[0mnetwork error: early eof
[2m2025-07-18T23:37:29.944709Z[0m [32m INFO[0m [2mkameo_remote::handle[0m[2m:[0m HANDLE.RS: Incoming direct TCP connection handler exited [3mpeer[0m[2m=[0m127.0.0.1:54081
[2m2025-07-18T23:37:29.944715Z[0m [33m WARN[0m [2mkameo_remote::handle[0m[2m:[0m HANDLE.RS: Cannot handle peer failure - sender address unknown [3mpeer[0m[2m=[0m127.0.0.1:54081
[2m2025-07-18T23:37:30.047110Z[0m [32m INFO[0m [1mbootstrap_peers[0m[2m:[0m [2mkameo_remote::handle[0m[2m:[0m starting bootstrap with vector clock support [3mpeer_count[0m[2m=[0m2
[2m2025-07-18T23:37:30.047177Z[0m [32m INFO[0m [1mbootstrap_peers[0m[2m:[0m [2mkameo_remote::handle[0m[2m:[0m BOOTSTRAP: Attempting to get connection for bootstrap [3mpeer[0m[2m=[0m127.0.0.1:8003
[2m2025-07-18T23:37:30.047363Z[0m [32m INFO[0m [1mbootstrap_peers[0m[2m:[0m [2mkameo_remote::handle[0m[2m:[0m BOOTSTRAP: Attempting to get connection for bootstrap [3mpeer[0m[2m=[0m127.0.0.1:8002
[2m2025-07-18T23:37:30.047461Z[0m [32m INFO[0m [1mbootstrap_peers[0m[2m:[0m [2mkameo_remote::handle[0m[2m:[0m bootstrap completed with vector clock support
[2m2025-07-18T23:37:30.047486Z[0m [32m INFO[0m [2mkameo_remote::handle[0m[2m:[0m bootstrap completed successfully [3mattempt[0m[2m=[0m1
[2m2025-07-18T23:37:30.047523Z[0m [32m INFO[0m [1mnew[0m[1m{[0m[3mbind_addr[0m[2m=[0m127.0.0.1:8001[1m}[0m[2m:[0m [2mkameo_remote::handle[0m[2m:[0m gossip registry started [3mbind_addr[0m[2m=[0m127.0.0.1:8001
Node A started at 127.0.0.1:8001
Node A connecting to Node B (8002) and Node C (8003)
[2m2025-07-18T23:37:30.047551Z[0m [32m INFO[0m [2mkameo_remote::registry[0m[2m:[0m ðŸ”„ Retrying connection to previously failed peer [3mpeer[0m[2m=[0m127.0.0.1:8003 [3mfailures[0m[2m=[0m3 [3mtime_since_failure[0m[2m=[0m1
[2m2025-07-18T23:37:30.047560Z[0m [32m INFO[0m [2mkameo_remote::registry[0m[2m:[0m ðŸ”„ Retrying connection to previously failed peer [3mpeer[0m[2m=[0m127.0.0.1:8002 [3mfailures[0m[2m=[0m3 [3mtime_since_failure[0m[2m=[0m1
[2m2025-07-18T23:37:30.047602Z[0m [32m INFO[0m [2mkameo_remote::registry[0m[2m:[0m ðŸš€ REGISTERED_ACTOR_IMMEDIATE: Will trigger immediate propagation [3mactor_name[0m[2m=[0mnode_a [3mbind_addr[0m[2m=[0m127.0.0.1:8001 [3mpriority[0m[2m=[0mImmediate [3mregistration_duration_ms[0m[2m=[0m0.029
Registered node_a on Node A with immediate priority
[2m2025-07-18T23:37:30.047785Z[0m [33m WARN[0m [2mkameo_remote::registry[0m[2m:[0m failed to gossip to peer [3mpeer[0m[2m=[0m127.0.0.1:8003 [3merror[0m[2m=[0mnetwork error: Connection refused (os error 61)
[2m2025-07-18T23:37:30.047810Z[0m [33m WARN[0m [2mkameo_remote::registry[0m[2m:[0m failed to gossip to peer [3mpeer[0m[2m=[0m127.0.0.1:8002 [3merror[0m[2m=[0mnetwork error: Connection refused (os error 61)
[2m2025-07-18T23:37:30.047819Z[0m [32m INFO[0m [2mkameo_remote::handle[0m[2m:[0m Completed immediate gossip round after bootstrap
Node A - Active: 0, Failed: 2, Known actors: 0, Local actors: 1
Peer Status:
  127.0.0.1:8003 - FAILED (failures: 3)
  127.0.0.1:8002 - FAILED (failures: 3)
Node A - Active: 0, Failed: 2, Known actors: 0, Local actors: 1
Peer Status:
  127.0.0.1:8003 - FAILED (failures: 3)
  127.0.0.1:8002 - FAILED (failures: 3)
Node A - Active: 0, Failed: 2, Known actors: 0, Local actors: 1
Peer Status:
  127.0.0.1:8003 - FAILED (failures: 3)
  127.0.0.1:8002 - FAILED (failures: 3)
Node A - Active: 0, Failed: 2, Known actors: 0, Local actors: 1
Peer Status:
  127.0.0.1:8003 - FAILED (failures: 3)
  127.0.0.1:8002 - FAILED (failures: 3)
Node A - Active: 0, Failed: 2, Known actors: 0, Local actors: 1
Peer Status:
  127.0.0.1:8003 - FAILED (failures: 3)
  127.0.0.1:8002 - FAILED (failures: 3)
[2m2025-07-18T23:37:40.900384Z[0m [32m INFO[0m [1mstart_gossip_timer[0m[2m:[0m [2mkameo_remote::registry[0m[2m:[0m ðŸ”„ Retrying connection to previously failed peer [3mpeer[0m[2m=[0m127.0.0.1:8002 [3mfailures[0m[2m=[0m3 [3mtime_since_failure[0m[2m=[0m11
[2m2025-07-18T23:37:40.900507Z[0m [32m INFO[0m [1mstart_gossip_timer[0m[2m:[0m [2mkameo_remote::registry[0m[2m:[0m ðŸ”„ Retrying connection to previously failed peer [3mpeer[0m[2m=[0m127.0.0.1:8003 [3mfailures[0m[2m=[0m3 [3mtime_since_failure[0m[2m=[0m11
[2m2025-07-18T23:37:40.901174Z[0m [33m WARN[0m [1mstart_gossip_timer[0m[2m:[0m [2mkameo_remote::registry[0m[2m:[0m failed to gossip to peer [3mpeer[0m[2m=[0m127.0.0.1:8002 [3merror[0m[2m=[0mnetwork error: Connection refused (os error 61)
[2m2025-07-18T23:37:40.901207Z[0m [33m WARN[0m [1mstart_gossip_timer[0m[2m:[0m [2mkameo_remote::registry[0m[2m:[0m failed to gossip to peer [3mpeer[0m[2m=[0m127.0.0.1:8003 [3merror[0m[2m=[0mnetwork error: Connection refused (os error 61)
Node A - Active: 0, Failed: 2, Known actors: 0, Local actors: 1
Peer Status:
  127.0.0.1:8003 - FAILED (failures: 3)
  127.0.0.1:8002 - FAILED (failures: 3)
Node A - Active: 0, Failed: 2, Known actors: 0, Local actors: 1
Peer Status:
  127.0.0.1:8003 - FAILED (failures: 3)
  127.0.0.1:8002 - FAILED (failures: 3)
Node A - Active: 0, Failed: 2, Known actors: 0, Local actors: 1
Peer Status:
  127.0.0.1:8003 - FAILED (failures: 3)
  127.0.0.1:8002 - FAILED (failures: 3)
Node A - Active: 0, Failed: 2, Known actors: 0, Local actors: 1
Peer Status:
  127.0.0.1:8003 - FAILED (failures: 3)
  127.0.0.1:8002 - FAILED (failures: 3)
Node A - Active: 0, Failed: 2, Known actors: 0, Local actors: 1
Peer Status:
  127.0.0.1:8003 - FAILED (failures: 3)
  127.0.0.1:8002 - FAILED (failures: 3)
[2m2025-07-18T23:37:51.696657Z[0m [32m INFO[0m [1mstart_gossip_timer[0m[2m:[0m [2mkameo_remote::registry[0m[2m:[0m ðŸ”„ Retrying connection to previously failed peer [3mpeer[0m[2m=[0m127.0.0.1:8003 [3mfailures[0m[2m=[0m3 [3mtime_since_failure[0m[2m=[0m22
[2m2025-07-18T23:37:51.696833Z[0m [32m INFO[0m [1mstart_gossip_timer[0m[2m:[0m [2mkameo_remote::registry[0m[2m:[0m ðŸ”„ Retrying connection to previously failed peer [3mpeer[0m[2m=[0m127.0.0.1:8002 [3mfailures[0m[2m=[0m3 [3mtime_since_failure[0m[2m=[0m22
[2m2025-07-18T23:37:51.697621Z[0m [33m WARN[0m [1mstart_gossip_timer[0m[2m:[0m [2mkameo_remote::registry[0m[2m:[0m failed to gossip to peer [3mpeer[0m[2m=[0m127.0.0.1:8003 [3merror[0m[2m=[0mnetwork error: Connection refused (os error 61)
[2m2025-07-18T23:37:51.697725Z[0m [33m WARN[0m [1mstart_gossip_timer[0m[2m:[0m [2mkameo_remote::registry[0m[2m:[0m failed to gossip to peer [3mpeer[0m[2m=[0m127.0.0.1:8002 [3merror[0m[2m=[0mnetwork error: Connection refused (os error 61)
Node A - Active: 0, Failed: 2, Known actors: 0, Local actors: 1
Peer Status:
  127.0.0.1:8003 - FAILED (failures: 3)
  127.0.0.1:8002 - FAILED (failures: 3)
Node A - Active: 0, Failed: 2, Known actors: 0, Local actors: 1
Peer Status:
  127.0.0.1:8003 - FAILED (failures: 3)
  127.0.0.1:8002 - FAILED (failures: 3)
Node A - Active: 0, Failed: 2, Known actors: 0, Local actors: 1
Peer Status:
  127.0.0.1:8003 - FAILED (failures: 3)
  127.0.0.1:8002 - FAILED (failures: 3)
